<app-page-header>
  <h1>Manage AutoScaler Credential: {{ (applicationService.application$ | async)?.app.entity.name }} </h1>
  <div class="page-header-right">
    <button mat-icon-button mat-button routerLink="{{parentUrl}}">
      <mat-icon>clear</mat-icon>
    </button>
  </div>
</app-page-header>
<div class="autoscaler-credential-page">
  <app-tile-grid class="app-autoscaler-tile-grid-100">
    <app-tile-group>
      <app-tile>
        <mat-card>
          <mat-card-header>
            <div>Custom metrics credential</div>
          </mat-card-header>
          <mat-card-content>
              <button class="autoscaler-credential-submit" color="accent" mat-button mat-raised-button
              (click)="createCredential()" [disabled]="false">Create</button>
              <button class="autoscaler-credential-submit" color="accent" mat-button mat-raised-button
              (click)="deleteCredentialConfirm()" [disabled]="false">Delete</button>
            <form [formGroup]="editCredentialForm" validate class="autoscaler-credential-form">
              <div class="autoscaler-credential-toggle">
                <span>Create random credential</span>
                <mat-slide-toggle [checked]="!randomCredential" (toggleChange)="toggleChange()">Create specified
                  credential
                </mat-slide-toggle>
              </div>
              <mat-form-field>
                <input matInput placeholder="Username" name="acusername" formControlName="acusername" type="text"
                  required>
                <mat-error *ngIf="editCredentialForm.get('acusername').hasError('required')">
                  Username is required
                </mat-error>
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Password" name="acpassword" formControlName="acpassword" type="text"
                  required>
                <mat-error *ngIf="editCredentialForm.get('acpassword').hasError('required')">
                  Password is required
                </mat-error>
              </mat-form-field>
            </form>
          </mat-card-content>
        </mat-card>
      </app-tile>
    </app-tile-group>
    <app-tile-group *ngIf="appAutoscalerCredential$ | async as credential">
      <app-tile>
        <mat-card>
          <mat-card-header>
            <div>A new credential generated. Please update the credential setting, and restart your application to
              ensure your env variable changes take effect.</div>
          </mat-card-header>
          <mat-card-content>
            <app-code-block>
              <pre>{{ credential | json }}</pre>
            </app-code-block>
          </mat-card-content>
        </mat-card>
      </app-tile>
    </app-tile-group>
  </app-tile-grid>
</div>